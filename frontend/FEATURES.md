# 新增功能说明

## 概述
本次更新为工作流编辑器添加了以下新功能：

1. **右侧执行侧边栏** - 支持多个工作流同时执行
2. **左侧历史记录侧边栏** - 显示执行历史并支持查看详情
3. **本地历史记录存储** - 自动保存执行结果到浏览器本地存储

## 功能详情

### 1. 右侧执行侧边栏

#### 特性：
- **多标签页支持**：可以同时打开多个工作流执行
- **实时状态显示**：每个标签页显示执行状态（运行中、完成、错误等）
- **独立执行**：每个工作流在独立的标签页中执行，互不干扰
- **可折叠设计**：可以折叠侧边栏以节省屏幕空间

#### 使用方法：
1. 点击工具栏中的 "Execute" 按钮
2. 系统会在右侧侧边栏中创建新的执行标签页
3. 工作流开始执行，可以实时查看进度和结果
4. 可以点击标签页右上角的 "×" 关闭不需要的执行

#### 状态指示：
- 🔵 蓝色圆点：正在运行
- 🟢 绿色圆点：执行完成
- 🔴 红色圆点：执行出错
- 🟡 黄色圆点：已取消
- ⚪ 灰色圆点：等待执行

### 2. 左侧历史记录侧边栏

#### 特性：
- **执行历史记录**：自动记录所有工作流执行结果
- **搜索功能**：可以按工作流名称搜索历史记录
- **状态筛选**：可以按执行状态筛选记录（全部/完成/错误）
- **详情查看**：点击眼睛图标可以查看执行详情
- **记录管理**：支持删除单条记录或清空所有历史

#### 使用方法：
1. 执行工作流后，结果会自动保存到历史记录
2. 在左侧历史记录侧边栏中可以看到所有执行记录
3. 使用搜索框可以快速找到特定的工作流执行记录
4. 点击 👁️ 图标查看详细结果
5. 点击 🗑️ 图标删除不需要的记录

#### 历史记录信息：
- 工作流名称
- 执行时间（相对时间显示，如"2小时前"）
- 执行状态
- 错误信息（如果有）
- 结果数量统计

### 3. 历史记录详情弹窗

#### 特性：
- **完整结果展示**：显示工作流执行的完整结果
- **媒体文件预览**：自动识别并预览生成的图片和视频
- **结构化显示**：以易读的格式显示JSON结果
- **媒体文件操作**：支持在新窗口或新标签页中打开媒体文件

#### 布局：
- **左侧面板**：显示结构化的执行结果数据
- **右侧面板**：显示生成的媒体文件（图片、视频等）
- **错误信息**：如果执行出错，会突出显示错误信息

### 4. 本地存储

#### 特性：
- **自动保存**：执行结果自动保存到浏览器localStorage
- **持久化存储**：关闭浏览器后重新打开，历史记录依然存在
- **容量限制**：最多保存100条历史记录，超出后自动删除最旧的记录
- **数据安全**：所有数据仅存储在本地浏览器中

## 界面布局

```
[历史记录侧边栏] [节点/工作流侧边栏] [     主编辑区域     ] [执行侧边栏]
[   搜索/筛选   ] [   节点类型选择   ] [   工作流画布     ] [ 多标签执行 ]
[   历史列表   ] [   工作流列表     ] [   节点连接      ] [  实时结果  ]
[   操作按钮   ] [                 ] [   工具栏        ] [  媒体预览  ]
```

## 快捷操作

- **折叠侧边栏**：点击侧边栏顶部的箭头图标
- **快速执行**：点击工具栏的"Execute"按钮
- **查看历史**：点击历史记录中的眼睛图标
- **清理记录**：使用"Clear All"按钮清空所有历史记录

## 注意事项

1. **浏览器兼容性**：需要支持localStorage的现代浏览器
2. **存储限制**：历史记录存储在浏览器本地，清除浏览器数据会丢失历史记录
3. **性能考虑**：大量历史记录可能影响加载速度，建议定期清理
4. **网络依赖**：媒体文件预览需要网络连接到服务器

## 技术实现

- **React Hooks**：使用useState、useEffect等管理组件状态
- **TypeScript**：提供类型安全和更好的开发体验
- **Tailwind CSS**：响应式设计和现代UI样式
- **LocalStorage API**：本地数据持久化存储
- **Heroicons**：统一的图标系统
