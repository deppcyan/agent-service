{
    "nodes": {
        "video_batch": {
            "type": "WanTalkBatchNode",
            "inputs": {
                "api_url": "http://192.168.0.238:8000/v1/generate",
                "timeout": 300,
                "callback_url": "http://192.168.0.238:8001/webhook",
                "image_urls": [],
                "prompts": [],
                "audio_prompts": [],
                "width": 360,
                "height": 642,
                "duration": 5,
                "output_format": "mp4"
            }
        },
        "image_analysis": {
            "type": "QwenVLNode",
            "inputs": {
                "api_url": "https://50067120bfc96748-8000.us-ca-6.gpu-instance.novita.ai/v1/generate",
                "system_prompt": "You are an AI story expander specialized in cinematic narrative development. Your input consists of: (1) an image providing key characters, themes, or visual motifs; (2) a text prompt describing an initial story segment or scene setup.\r\n\r\nTask: Expand the provided text into a cohesive, multi-segment story continuation (3 segments total, each building naturally on the previous). Maintain consistency in character appearance (e.g., age, build, clothing, expressions), environment (e.g., lighting, weather, architecture), and tone (e.g., suspenseful, whimsical). Infuse cinematic elements: dynamic camera angles (close-up, wide shot, tracking), lighting (dramatic shadows, golden hour), and pacing (tense buildup, fluid transitions).\r\n\r\nFor each story segment:\r\n- Craft a detailed image generation prompt (200-300 words): Vivid, descriptive for high-res stills; include style (e.g., photorealistic, film noir), composition, colors, and emotions.\r\n- Craft a video generation prompt (150-250 words): Specify motion (e.g., slow pan, quick cuts), duration (5-10s), sound cues (ambient, dialogue), and transitions.\r\n- If dialogue occurs, extract it separately as a list of speaker lines with timestamps (e.g., [0:02] Character: \"Line here\").\r\n\r\nOutput exclusively in JSON format:\r\n{\r\n  \"expanded_story\": {\r\n    \"segments\": [\r\n      {\r\n        \"segment_number\": 1,\r\n        \"narrative_summary\": \"Brief 1-sentence overview of this segment.\",\r\n        \"image_prompt\": \"Full descriptive prompt string.\",\r\n        \"video_prompt\": \"Full descriptive prompt string.\",\r\n        \"dialogue\": [\"[timestamp] Speaker: Line.\"]  \/\/ Empty array if none\r\n      },\r\n      \/\/ Repeat for each segment\r\n    ]\r\n  }\r\n}\r\n\r\nEnsure prompts are optimized for tools like Stable Diffusion (images) or Runway ML (videos): keyword-rich, aspect ratio 16:9, 8K resolution, no artifacts. Keep expansions logical and engaging, ending on a hook for potential further extension.",
                "timeout": 300,
                "image_url": "",
                "prompt": "",
                "seed": 0,
                "max_tokens": 1014
            }
        },
        "storyboard_parser": {
            "type": "StoryboardParserNode",
            "inputs": {
                "text": "",
                "image_url": "",
                "max_segments": 3
            }
        },
        "edit_batch": {
            "type": "QwenEditBatchNode",
            "inputs": {
                "api_url": "http://192.168.0.238:8000/v1/generate",
                "timeout": 300,
                "callback_url": "http://192.168.0.238:8001/webhook",
                "image_urls": [],
                "prompts": [],
                "width": 360,
                "height": 642
            }
        },
        "video_concat": {
            "type": "VideoConcatNode",
            "inputs": {
                "api_url": "http://192.168.0.238:8000/v1/generate",
                "timeout": 300,
                "callback_url": "http://192.168.0.238:8001/webhook",
                "video_urls": [],
                "fps": 25
            }
        }
    },
    "connections": [
        {
            "from_node": "image_analysis",
            "from_port": "response",
            "to_node": "storyboard_parser",
            "to_port": "text"
        },
        {
            "from_node": "storyboard_parser",
            "from_port": "prompts",
            "to_node": "edit_batch",
            "to_port": "prompts"
        },
        {
            "from_node": "storyboard_parser",
            "from_port": "image_urls",
            "to_node": "edit_batch",
            "to_port": "image_urls"
        },
        {
            "from_node": "edit_batch",
            "from_port": "output_urls",
            "to_node": "video_batch",
            "to_port": "image_urls"
        },
        {
            "from_node": "storyboard_parser",
            "from_port": "video_prompts",
            "to_node": "video_batch",
            "to_port": "prompts"
        },
        {
            "from_node": "video_batch",
            "from_port": "output_urls",
            "to_node": "video_concat",
            "to_port": "video_urls"
        }
    ]
}